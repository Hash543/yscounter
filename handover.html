<!DOCTYPE html>
<html lang="tw">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>悅盛保全 - 櫃台服務系統</title>

    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
    
    <script src="/js/jquery.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="/css/main.css">
    <script type="text/javascript" src="/js/Common.js"></script>
    <script src="/js/vue.js" ></script>    
    <style type="text/css">
      textarea {
        resize: none;
        overflow: hidden;
        min-height: 50px;
        max-height: 100px;
      }
      input[readonly],textarea[readonly] {
        color: #1121dc;
      }
    </style>
  </head>
  <body> 
    <div class="loadingMask" style="width:100%;height:100%;position:fixed;background: rgba(0,0,0,0.3);z-index:1111;display: none"></div>
    <header>
      <nav class="navbar">
      </nav>
    </header>
    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <form name="sopForm" method="POST" action="">
          <input type="hidden" name="action" value="addWorkRecord">
          <input type="hidden" name="F_EMP_ID" value="">
          <input type="hidden" name="F_POINT_ID" value="">
          <div class="panel panel-warning" id="pointPanel"> 
            <div class="panel-heading"> 
              <h3 class="panel-title">
                <select style="margin-right:10px;padding:3px;" v-model="currentDate" @change="dateChage">
                  <option :value="v" v-for="(v,k) in dateOptions">{{v}}</option>
                </select>
                {{currentEmpName}}-現場工作紀錄
              </h3> 
            </div> 
            <div class="panel-body ">
              <div class="text-danger">注意事項</div>
              <textarea class="form-control" @blur="savePrecautions" v-model="precautions"></textarea  >
              <hr>
              <div id="pointTabs">
                <ul class="nav nav-tabs">
                    <li role="presentation" :class="{ active: k==currentTabKey }" v-for="(v,k) in tabs">
                      <a class="pointTab pointer" @click="clickTab(k,v.F_POINT_ID)">
                        {{v.F_POINT_NAME}}({{v.F_EMP_NAME}})
                      </a>
                    </li>
                  </ul>
              </div>
              <div class="pointSop">
                <table class="table table-bordered todoTable" >
                  <thead>
                    <tr>
                      <th colspan="4">
                        {{sopData.typeName}}
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th width="80">
                        狀態
                      </th>
                      <th width="170">
                        時間
                      </th>
                      <th>
                        項目名稱
                      </th>
                      <th>
                        備註
                      </th>
                    </tr>
                    <tr v-for="(sopList,slk) in sopData.list">
                      <td>
                        <span v-show="sopList.done">{{sopList.name}}</span>
                        <input v-show="!sopList.done" type="checkbox" :name="'workItem_'+slk" v-model="sopList.F_D2_SEQ">
                      </td>
                      <td>
                        <div class="input-group">
                          <input type="text" class="form-control " :name="'OT_TIME_'+slk" readonly aria-describedby="sizing-addon2" v-model="sopList.F_OT_TIME">
                        </div>
                      </td>
                      <td>
                        <div class="input-group">
                          <textarea class="form-control" :name="'OT_ATTINFO_'+slk" readonly aria-describedby="sizing-addon2" onkeyup="auto_grow(this)">{{sopList.F_OT_ATTINFO}}</textarea>
                        </div>
                      </td>
                      <td>
                        <div class="input-group">
                          <input type="text" class="form-control" :readonly="sopList.done?true:false" aria-describedby="sizing-addon2" v-model="sopList.comment">
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <table class="table table-bordered todoTable otherJob"> 
                  <thead>
                    <tr>
                      <th colspan="5">其它</th>
                    </tr>
                    <tr>
                      <th width="100">狀態</th>
                      <th width="200">類型</th>
                      <th width="150">時間</th>
                      <th width="250">內容說明</th>
                      <th>備註</th>
                    </tr>
                    <tr v-for="(rec,k) in otherRecord">
                      <td>
                        <input type="hidden" name="workOtherSeq[]" v-model="rec.F_D2_SEQ">
                        {{rec.F_EMP_NAME}}
                      </td>
                      <td>
                        <select name="workOtherType[]" class="form-control" v-model="otherOption.F_TID">
                          <option  v-for="(otherOption,ook) in data.otherType" :selected="rec.F_TID==otherOption.F_TID">{{otherOption.F_TNAME}}
                          </option>
                        </select>
                      </td>
                      <td>
                        <div class="input-group">
                          <input type="text" name="OT_OTHER_TIME[]" aria-describedby="sizing-addon2" v-model="rec.F_OT_TIME" class="form-control ">
                        </div>
                      </td>
                      <td>
                        <input v-show="rec.F_OT_ATTINFO!=''" type="text" class="form-control" name="OT_OTHER_ATTINFO[]" disabled=true  aria-describedby="sizing-addon2" v-model="rec.F_OT_ATTINFO">
                        <select v-show="rec.F_OT_ATTINFO==''" name="OT_OTHER_ATTINFO[]" class="form-control" v-model="rec.F_OT_ATTINFO">
                          <option value="1">機電維修</option>
                          <option value="2">電梯維修</option>
                          <option value="3">消防維修</option>
                          <option value="4">弱電維修</option>
                          <option value="5">園藝修剪</option>
                        </select>
                      </td>
                      <td>
                        <div class="input-group">
                          <textarea cols="30" rows="1" name="OT_OTHER_COMMENT[]" aria-describedby="sizing-addon2" value="" class="form-control" style="height: 48px;"></textarea>
                        </div>
                      </td>
                    </tr>
                  </thead>
                </table>
                <button type="button" @click="addOtherJob" id="addOtherJob">新增</button>
              </div>
            </div>
            <div class="panel-footer">
              <a id="sopSaveButton" @click="saveWork" role="button" class="btn btn-default">儲存» </a>
              <!-- <canvas id="canvas2" width="100" height="100"></canvas> -->
            </div> 
          </div>
        </form>
        <!-- <video id="cameraPreview"></video> -->
        <div id="scanArea">
          <video id="video" width="300"></video>  
          <button type="button" id="scanCancel">取消</button>
          <!-- <div class="scanAreaLeftTop"></div>
          <div class="scanAreaRightTop"></div>
          <div class="scanAreaLeftDown"></div>
          <div class="scanAreaRightDown"></div> -->
          <div class="scanAreaCenter"></div>
        </div>
      </div>
    </div>
    <div class="container">
      <footer>
      </footer>
    </div> <!-- /container -->

    <script type="text/javascript" src="js/handover.js"></script>
    <button class="btn btn-lg btn-warning" id="loading" style="display:none;"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span>請在20秒內掃描員工識別證</button>
  </body>
</html>
